{
    "identifier": "org.flyx.tex",
    "name": "TeX Suite",
    "organization": "Felix Krause",
    "description": "Support for TeX, LaTeX and ConTeXt",
    "version": "0.2",
    "categories": ["languages", "completions"],
    "bugs": "https://github.com/flyx/TeX.novaextension/issues",
    "repository": "https://github.com/flyx/TeX.novaextension",
    "license": "MIT",
    "issueMatchers": {
        "latex-error": {
            "pattern": {
                "regexp": "^(\\.[^\\s:]+):(\\d+):\\s+(.*)$",
                "message": 3,
                "file": 1,
                "line": 2,
                "severity": "error",
                "loop": false
            }
        }
    },
    "taskTemplates": {
        "latexmk": {
            "name": "latexmk",
            "description": "Builds the PDF via latexmk. Supports auto-update & preview with Skim via run button.",
            "persistent": false,
            "config": [
                {
                    "key": "tex.latex.mainfile",
                    "title": "Main file",
                    "description": "The file latexmk should be called upon",
                    "type": "path"
                },
                {
                    "key": "tex.latex.processor",
                    "title": "LaTeX processor",
                    "description": "The LaTeX processor that should be used for building your PDF.",
                    "type": "enum",
                    "values": [
                        ["-pdflatex", "pdfLaTeX"],
                        ["-xelatex", "XeLaTeX"],
                        ["-lualatex", "LuaLaTeX"],
                        ["", "Let latexmk choose"]
                    ],
                    "default": ""
                }
            ],
            "tasks": {
                "build": {
                    "shell": false,
                    "command": "/usr/bin/env",
                    "args": [
                        "latexmk",
                        "-interaction=nonstopmode",
                        "-file-line-error",
                        "-cd",
                        "$(Config:tex.latex.processor)",
                        "$(Config:tex.latex.mainfile)"
                    ],
                    "matchers": ["latex-error"]
                },
                "run": {
                    "shell": false,
                    "command": "/usr/bin/env",
                    "args": [
                        "latexmk",
                        "-interaction=nonstopmode",
                        "-file-line-error",
                        "-synctex=1",
                        "-e",
                        "\\$mypdffile = \"$(Config:tex.latex.mainfile)\";\n\\$mypdffile =~ s/tex\\$/pdf/;\n\\$pdf_previewer = \"osascript -e 'set theFile to POSIX file \\\\\"\\$mypdffile\\\\\" as alias' -e 'tell application \\\\\"Skim\\\\\"' -e 'set theDocs to get documents whose path is (get POSIX path of theFile)' -e 'if (count of theDocs) > 0 then revert theDocs' -e 'open theFile' -e 'end tell'\"; \\$pdf_update_method = 4; \\$pdf_update_command = \\$pdf_previewer;",
                        "-pvc",
                        "-pdf",
                        "-cd",
                        "$(Config:tex.latex.processor)",
                        "$(Config:tex.latex.mainfile)"
                    ],
                    "matchers": ["latex-error"]
                }
            }
        },
    }
}
